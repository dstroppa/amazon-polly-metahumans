# Developer Setup

This guide will walk you through everything you need to know about how this project is implemented and how to customize it for your own use.

**Contents**

- [How It Works](#how-it-works)
- [Project Architecture](#project-architecture)
- [Adding New MetaHumans](#adding-new-metahumans)
- [Readying for Production](#readying-for-production)


> 🛑 Before proceeding you must have Unreal Engine 4.26 or 4.27 installed as well as the Microsoft Visual Studio development tools required for UE4 C++ development (Windows) or the Xcode development tools (Mac). If you need help with these setup steps, refer to the Unreal Engine 4 documentation, especially ["Setting Up Visual Studio for Unreal Engine"](https://docs.unrealengine.com/4.26/en-US/ProductionPipelines/DevelopmentSetup/VisualStudioSetup/). Disclaimer: This was only tested with Visual Studio 2019 with UE4.26, although with slight modifications to the build script it should work with Visual Studio 2022 as well. I couldn't get this to work with UE5.



### 1. Create AWS credentials for the project

In order for this Unreal Engine project to interact with the Amazon Polly service, you must provide it with AWS credentials that allow access to that service. The easiest way to generate these credentials is to create a new AWS Identity Access & Management (IAM) user in your AWS account. 

Create a new IAM user and assign to it the permissions policies named *"AmazonPollyReadOnlyAccess"* and *"AmazonLexRunBotsOnly "*. Although the name you give this user is not important, we suggest naming it "MetaHumans Sample" or something equally distinctive. Be sure to save the **Access Key ID** and the **Secret Access Key** that are generated during the user creation process. You'll need them later.

> 💡 **Tip:** For more help, see ["Creating an IAM user in your AWS account"](https://docs.aws.amazon.com/IAM/latest/UserGuide/id_users_create.html) in the AWS IAM documentation.



### 2. Install and configure the AWS Command Line Interface

You will need to configure your local computer to communicate with AWS services using the credentials you created above. The easiest way to do this is to install and configure the AWS Command Line Interface (AWS CLI).

Install the AWS CLI to your local computer following [these instructions](https://docs.aws.amazon.com/cli/latest/userguide/install-cliv2.html).

Use the `aws configure` command to create a default profile for the AWS CLI. Be sure to use the **Access Key ID** and **Secret Access Key** values you saved above.

> 💡 **Tip:** For more help, see ["Configuration basics"](https://docs.aws.amazon.com/cli/latest/userguide/cli-configure-quickstart.html) in the AWS CLI documentation.



### 3. Compile the Polly and Lex C++ SDK

> 🛑 This next step requires cmake and git. If you don't already have cmake installed, you can [download it here](https://cmake.org/download/). After you download cmake, launch cmake and click 'Tools' -> 'How To Install For Command Line Use' and follow one of the instructions. E.g. for Mac - One may add CMake to the PATH: PATH="/Applications/CMake.app/Contents/bin":"$PATH"

This project makes use of the C++ Polly API and Lex API – a part of the AWS SDK for C++ – to communicate with the respective service. We've provided scripts to automatically download and compile the appropriate binaries for you. Run one of the following scripts:

**Windows:** [Source/AmazonPollyMetaHuman/ThirdParty/AwsSdk/BuildAwsSdkWin64.bat](Source/AmazonPollyMetaHuman/ThirdParty/AwsSdk/BuildAwsSdkWin64.bat)

**Mac:** [Source/AmazonPollyMetaHuman/ThirdParty/AwsSdk/BuildAwsSdkMac.sh](Source/AmazonPollyMetaHuman/ThirdParty/AwsSdk/BuildAwsSdkMac.sh)



### 4. Open the Unreal Engine project

Open the project by double-clicking on the *AmazonPollyMetaHuman.uproject* file.

Click "Yes" on the dialog that appears.

<img src="Documentation/media/module-compile-prompt.png" alt="Module compile prompt" style="width: 33em;" />



### 5. Run the project

To try out the project, simply click the "Play" button in the Unreal Engine editor. The MetaHuman will come alive using speech and lip sync generated by Amazon Polly. After the MetaHuman stops speaking you can enter your own custom speech text into the on-screen text field.

![Play button](Documentation/media/UE4-toolbar-play.png)



> ⚠️ Wait until the "Compiling Shaders" process completes before running this project for the first time.
>
> <img src="Documentation/media/compiling-shaders.png" alt="&quot;Compiling Shaders&quot; message" style="width: 30em;" />



> 🛠 **Troubleshooting:** This project includes extensive error messaging that can help you debug common problems.  If the project doesn't work properly, open the Output Log tab in the Unreal Engine editor and look for error messages.